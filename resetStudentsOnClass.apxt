trigger resetStudentsOnClass on Class__c (after update) {
    if(trigger.isUpdate){
        for(Class__c c :trigger.new){
            if(c.Custom__c == 'Reset'){
                List<Class__c> query=[select name,(SELECT name FROM students__r) from class__c WHERE id =: c.Id ];
    			for(Class__c del:query){
        			delete del.students__c;
                }
    		}
    }
}